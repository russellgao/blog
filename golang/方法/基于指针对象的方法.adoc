= 基于指针对象的方法
:toc:
:toc-title:
:toclevels: 5
:sectnums:

== 介绍
如果类型T的所有方法都是用T类型自己来做接收器(而不是 *T )，那么拷贝这种类型的实例就是安全 的;调用他的任何一个方法也就会产生一个值的拷贝。比如time.Duration的这个类型，在调用其方 法时就会被全部拷贝一份，包括在作为参数传入函数的时候。但是如果一个方法使用指针作为接收 器，你需要避免对其进行拷贝，因为这样可能会破坏掉该类型内部的不变性。比如你对 bytes.Buffer对象进行了拷贝，那么可能会引起原始对象和拷贝对象只是别名而已，但实际上其指 向的对象是一致的。紧接着对拷贝后的变量进行修改可能会有让你意外的结果。

不管你的method的receiver是指针类型还是非指针类型，都是可以通过指针/非指针类型进行调 用的，编译器会帮你做类型转换。
2. 在声明一个method的receiver该是指针还是非指针类型时，你需要考虑两方面的内部，第一方 面是这个对象本身是不是特别大，如果声明为非指针变量时，调用会产生一次拷贝;第二方面 是如果你用指针类型作为receiver，那么你一定要注意，这种指针类型指向的始终是一块内存 地址，就算你对其进行了拷贝。熟悉C或者C艹的人这里应该很快能明白。