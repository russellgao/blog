= 同一个pod共享的名称空间
:toc:
:toclevels: 5
:toc-title:
:sectnums:

== 共享的
=== UTS
主机名名称空间，保存内核名称、版本以及主机名和域名。默认情况下同一个POD的不同容器是共享UTS的

=== IPC
进程间通信名称空间，IPC的隔离就是阻断进程间通信，主要是信号量、队列和共享内存。运行主机进程通过上面的机制进行通信。

实验证明，默认情况下同一个POD中的不同容器的IPC名称空间是共享的。


实验证明，默认情况下同一个POD中的不同容器的MNT名称空间不是共享的。
=== NET
网络名称空间，同一主机上的不同进程可以进行localhost或者本地unix socket通信。在单独启动容器的时候不同容器是隔离的，但是在POD中不同容器通过一个Infra容器来进行共享网络名称空间，其原理是其他用户自己定义的容器都Join这个Infra容器的网络。

=== USER


== 不共享
=== MNT
Mount名称空间，提供对磁盘挂载点和文件系统的隔离能力。同一主机上的不同进程访问相同的路径会得到相同的内容，因为它们共享本地主机的磁盘和文件系统。

在同一POD内容器之间挂载点名称空间是隔离的，如果该POD的多个容器挂载一个POD级别的Volume，那么它们就可以实现挂载点的共享，但共享的也仅仅是这一个Volume并不是整个文件系统。

== PID
进程ID名称空间，同一主机上的不同进程在同一PID空间内可以看到其他进程的ID，并且同一PID空间的进程的ID不会重复。另外PID名称空间有层级关系，子空间看不到父空间的内容，但是父空间可以管理子空间，比如发送信号。

在POD中则对应为同一POD内的不同容器可以看到对方的进程ID。默认不是共享的，可以设置POD的shareProcessNamespace这个值为true来进行共享，默认为false。我在App2中启动一个top命令，然后在App1中通过ps命令查看

实验证明，默认情况下同一个POD中的不同容器的PID名称空间不是共享的。

== 参考
- https://www.cnblogs.com/rexcheny/p/11017146.html